<script src="/js/date.js"></script>
<div class="container" style="min-width:180px;padding:10px;background-color:white;width: 90% ;margin-left: auto;margin-right: auto;margin-top:10%;margin-bottom: 5%;">       
    <div class="row jumbotron" data-ng-repeat="step in data" >
        <div >
            <div class="col-sm-2 image" >
            <img src="/images/noimg.png" height="100px" width="100px" />
            </div>
            <div class="col-sm-10 data">
            <table class="table">
            <!--<tr data-ng-repeat="(key, val) in step">
                
                <td >{{val}}</td>
            </tr>-->
                <tr>
                    <td><label data-ng-model="formData.name[$index]" data-ng-init="formData.name[$index]= step[0]">{{formData.name[$index]}}</label></td>
                
                </tr>
                
                <tr>
                <td>{{step[1]}}</td>
                
                </tr>
                
                <tr>
                <td>{{step[2]}}</td>
                
                </tr>
                
            </table>
            <button class="btn btn-warning" data-toggle="modal" data-target="#bookApp" data-ng-click="bookNow(formData.name[$index]);">BookNow</button>
		   
            </div>
        </div>

    <div id="bookApp" class="modal fade" role="dialog">
    <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Book Now!</h4>
      </div>
      <div class="modal-body">
          <div class="jumbotron" data-ng-show="reply">
           <span data-ng-show="appointmentMsg">{{ appointmentMsg }}</span> 
          <span data-ng-show="appointmentError">{{ appointmentError }}</span>
         </div>
        <table class="table">
            <tr>
            <th>
            Doctor    
            </th>
            <th>
            {{ doctorName }}
            </th>
            </tr>
            <tr>
            <td>Username</td>
            <td><input type="text" data-ng-model="data.user_id"></td>
            </tr>
            <tr>
			<td>Select Date</td>
			<td>
			<select id="daydropdown" onchange="changeValue()">
			</select> 
			<select id="monthdropdown" onchange="changeValue()">
			</select> 
			<select id="yeardropdown" onchange="changeValue()">
			</select>
                        </td>
            
			</tr>
            <tr>
            <td>Confirm Date</td>
            <td><input type="text" id="date" data-ng-model="data.date" disabled>
</td>
            </tr>
            <tr>
            <td>
                Priority
                </td>
            <td>
                <select data-ng-model="data.priority">
                <option value="High">High</option>
                <option value="Medium">Medium</option>
                <option value="Low">Low</option>
                </select>
            </td>
            </tr>
            <tr>
            <td colspan="2"><button class="btn btn-danger" style="width:100%;" data-ng-click="bookDoctor(data);">Confirm</button></td>
            </tr>
          </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" >Close</button>
      </div>
    </div>

  </div>
        </div>
    
    </div>
</div>
    <script type="text/javascript">

populatedropdown("daydropdown", "monthdropdown", "yeardropdown");
window.onload=function(){
populatedropdown("daydropdown", "monthdropdown", "yeardropdown")
}
function changeValue(){
var day=parseInt(document.getElementById("daydropdown").value) - 1;
var month=document.getElementById("monthdropdown").value;        
var year=document.getElementById("yeardropdown").value;        
document.getElementById("date").value=day+'-'+month+'-'+year;
angular.element($('#txtLat')).triggerHandler('input');
                    angular.element($('#date')).triggerHandler('input');
                    
}
</script>
