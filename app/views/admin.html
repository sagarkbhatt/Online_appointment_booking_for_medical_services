<script src="/js/date.js"></script>
<div class="container" style="min-width:200px;padding:10px;background-color:white;width: 90% ;margin-left: auto;margin-right: auto;margin-top:10%;margin-bottom: 5%;">    

<div class="jumbotron">
  <h1> Welcome Doctor</h1>      
  <p>Manage and monitor your system with this panel.</p>
</div>

<div class="container">

    <center><a href="#/doctorpanel" class="btn btn-info" style="width:60%">Add details</a></center>
   <br/>

      <center><a  class="btn btn-info" style="width:60%" data-ng-click="viewAppointment();" data-toggle="modal" data-target="#viewApp">View appointments</a></center>
    
     <br/>
    
      <center><a  class="btn btn-info" style="width:60%" data-ng-click="viewAppointment();" data-toggle="modal" data-target="#updateApp">Update appointment</a></center>
    <br/>
    
    
    
    
    
    <div id="viewApp" class="modal fade large" role="dialog" style="width:80%;">
    <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">View Appointment!</h4>
      </div>
    
    <div class="modal-body">
    
                <table class="table" data-ng-show="viewApp" >
                <tr>
                <th>User</th>
                <th>Doctor</th>
                <th>Status</th>
                <th>time</th>
                <th>Priority</th>
                </tr>
                <tr data-ng-repeat="x in appointment">
                
                <td>{{ x[1] }}</td> 
                <td>{{ x[2] }}</td> 
                <td>{{ x[3] }}</td> 
                <td>{{ x[4] }}</td> 
                <td>{{ x[5] }}</td>
                                </tr>
                </table>      
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" >Close</button>
      </div>
    </div>
        </div>
    </div>
    
    
    
    <div id="updateApp" class="modal fade" role="dialog">
    <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Update Appointment!</h4>
      </div>
    
    <div class="modal-body">
    <div class="jumbotron" data-ng-show="ureply">
           <span data-ng-show="updateAppointment">{{ updateAppointment }}</span> 
          <span data-ng-show="updateError">{{ updateError }}</span>
         </div>

                <table class="table" data-ng-show="viewApp" >
                <tr>
                <th></th>
                <th>User</th>
                <th>Doctor</th>
                <th>Status</th>
                <th>Change Status</th>
                <th>time</th>
                <th colspan="2">Change time</th>
                <th>Priority</th>
                <th>Update</th>
                </tr>
                <tr data-ng-repeat="x in appointment">
                <td> {{ x[0] }}</td>
                <td>{{ x[1] }}</td> 
                <td>{{ x[2] }}</td> 
                <td>{{ data.status }}</td>
                <td><select data-ng-model="data.status">
                    <option value="Approved">Approved</option>
                    <option value="Confirm">Confirm</option>
                    <option value="Postpond">Postpond</option>
                    </select></td>
                <td>{{ x[4] }}</td>
                <td colspan="2">
    		<select id="daydropdown" onchange="changeValue()">
			</select> 
			<select id="monthdropdown" onchange="changeValue()">
			</select> 
			<select id="yeardropdown" onchange="changeValue()">
			</select>
                    
            
            <input type="text" id="date" data-ng-model="data.udate" disabled></td>    
                    
                <td>{{ x[5] }}</td>
                <td><button class="btn btn-danger" data-ng-click="updateAppointment(data,x[0])">Update</button></td>

                </tr>
                
                
                    
                    
                </table>      
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" >Close</button>
      </div>
    </div>
    </div>
    </div>
    
</div>
</div>
 

</div>

   <script type="text/javascript">

populatedropdown("daydropdown", "monthdropdown", "yeardropdown");
window.onload=function(){
populatedropdown("daydropdown", "monthdropdown", "yeardropdown")
}
function changeValue(){
var day=parseInt(document.getElementById("daydropdown").value) - 1;
var month=document.getElementById("monthdropdown").value;        
var year=document.getElementById("yeardropdown").value;        
document.getElementById("date").value=day+'-'+month+'-'+year;
angular.element($('#txtLat')).triggerHandler('input');
                    angular.element($('#date')).triggerHandler('input');
                    
}
</script>
